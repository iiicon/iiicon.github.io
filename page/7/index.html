<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans,en,default">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="coding note and life perception 代码笔记和生活感悟">
<meta property="og:type" content="website">
<meta property="og:title" content="一个没有情趣和色彩的人">
<meta property="og:url" content="https://sgw.wiki/page/7/index.html">
<meta property="og:site_name" content="一个没有情趣和色彩的人">
<meta property="og:description" content="coding note and life perception 代码笔记和生活感悟">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一个没有情趣和色彩的人">
<meta name="twitter:description" content="coding note and life perception 代码笔记和生活感悟">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://sgw.wiki/page/7/">





  <title>一个没有情趣和色彩的人</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一个没有情趣和色彩的人</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">正经点 少说话</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/06/24/TS泛型/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/24/TS泛型/" itemprop="url">TS泛型</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-24T00:02:45+08:00">
                2019-06-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TS/" itemprop="url" rel="index">
                    <span itemprop="name">TS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>泛型就是用一个东西表示广泛类型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function returnIt&lt;T&gt;(param: T): T &#123;</span><br><span class="line">  return param</span><br><span class="line">&#125;</span><br><span class="line">let s = returnIt&lt;string&gt;(&apos;hi&apos;)</span><br><span class="line"></span><br><span class="line">// 表示对象</span><br><span class="line">interface Human &#123;</span><br><span class="line">  name: string</span><br><span class="line">  age: number</span><br><span class="line">&#125;</span><br><span class="line">let p = returnIt&lt;Human&gt;(&#123; name: &apos;zhangsan&apos;, age: 18 &#125;)</span><br><span class="line"></span><br><span class="line">// 返回一个 array</span><br><span class="line">function returnArray&lt;T&gt;(arr: Array&lt;T&gt;): Array&lt;T&gt; &#123;</span><br><span class="line">  return arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="泛型函数"><a href="#泛型函数" class="headerlink" title="泛型函数"></a>泛型函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 这就是泛型函数</span><br><span class="line">let returnIt: &lt;U&gt;(param: U) =&gt; U = &lt;T&gt;(param: T): T =&gt; param</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  interface add &#123;</span><br><span class="line">    (a: number, b: number): number</span><br><span class="line">  &#125;</span><br><span class="line">  interface addAny&lt;T&gt; &#123;</span><br><span class="line">    (a: T, b: T): T</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const add: add = (a, b) =&gt; a + b</span><br><span class="line"></span><br><span class="line">  const addAny: addAny&lt;string&gt; = (a, b) =&gt; a + b</span><br><span class="line">  console.log(addAny(&apos;1&apos;, &apos;3&apos;))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="泛型类"><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h3><p>泛型类使用（&lt;&gt;）括起泛型类型，跟在类名后面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class GenericNumber&lt;T&gt; &#123;</span><br><span class="line">    zeroValue: T;</span><br><span class="line">    add: (x: T, y: T) =&gt; T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let myGenericNumber = new GenericNumber&lt;number&gt;();</span><br><span class="line">myGenericNumber.zeroValue = 0;</span><br><span class="line">myGenericNumber.add = function(x, y) &#123; return x + y; &#125;;</span><br></pre></td></tr></table></figure></p>
<h3 id="泛型约束"><a href="#泛型约束" class="headerlink" title="泛型约束"></a>泛型约束</h3><p>就是给泛型添加一些约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function returnIt&lt;T&gt;(arg: T): T&#123;</span><br><span class="line">  console.log(arg.length) // error, 我们知道不是任何数据类型都有length属性，如果我们不约束有可能报错</span><br><span class="line">  return arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们使用接口和 extends 关键字实现约束<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface HasLength&#123;</span><br><span class="line">  length: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function returnIt&lt;T extends HasLength&gt;(arg: T): T&#123;</span><br><span class="line">  console.log(arg.length) // no error</span><br><span class="line">  return arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="在泛型中使用类"><a href="#在泛型中使用类" class="headerlink" title="在泛型中使用类"></a>在泛型中使用类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function create&lt;T&gt;(c: &#123;new(): T; &#125;): T &#123;</span><br><span class="line">  return new c();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><h4 id="使用对象字面量来定义泛型函数"><a href="#使用对象字面量来定义泛型函数" class="headerlink" title="使用对象字面量来定义泛型函数"></a>使用对象字面量来定义泛型函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function identity&lt;T&gt;(arg: T): T &#123;</span><br><span class="line">    return arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let myIdentity: &#123;&lt;T&gt;(arg: T): T&#125; = identity;</span><br></pre></td></tr></table></figure>
<p>这其实可以直接变换一下使用泛型接口来实现<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">interface GenericIdentityFn &#123;</span><br><span class="line">    &lt;T&gt;(arg: T): T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function identity&lt;T&gt;(arg: T): T &#123;</span><br><span class="line">    return arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let myIdentity: GenericIdentityFn = identity;</span><br></pre></td></tr></table></figure></p>
<p><strong>总之泛型函数就是要在前面声明泛型变量 T</strong></p>
<p>当然可以把泛型参数当做整个接口的一个参数，这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">interface GenericIdentityFn&lt;T&gt; &#123;</span><br><span class="line">    (arg: T): T;</span><br><span class="line">&#125;</span><br><span class="line">function identity&lt;T&gt;(arg: T): T &#123;</span><br><span class="line">    return arg;</span><br><span class="line">&#125;</span><br><span class="line">let myIdentity: GenericIdentityFn&lt;number&gt; = identity;</span><br></pre></td></tr></table></figure></p>
<p><strong>所以对于描述那部分属性属于泛型部分，放在函数签名和放在接口上是需要区分的</strong></p>
<h4 id="对于泛型类"><a href="#对于泛型类" class="headerlink" title="对于泛型类"></a>对于泛型类</h4><p>类有两部分：静态部分和实例部分。 泛型类指的是实例部分的类型，所以类的静态属性不能使用这个泛型类型。</p>
<h3 id="实际使用"><a href="#实际使用" class="headerlink" title="实际使用"></a>实际使用</h3><ol>
<li>函数中泛型使用</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function identity&lt;T&gt;(arg: T): T &#123;</span><br><span class="line">  return arg;</span><br><span class="line">&#125;</span><br><span class="line">let output = identity(&quot;myString&quot;);</span><br></pre></td></tr></table></figure>
<p>注意我们没有必要使用尖括号来明确地传入类型；编译器可以查看参数的值，然后把 T 设置为他的类型，类型推论帮助我们保持代码精简和高可读性</p>
<ol start="2">
<li>泛型变量的使用</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function loggingIdentity&lt;T&gt;(arg: T[]): T[]</span><br></pre></td></tr></table></figure>
<p>我们把泛型变量T当做类型的一部分使用，而不是整个类型，增加了灵活性</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/06/24/TS函数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/24/TS函数/" itemprop="url">TS函数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-24T00:02:32+08:00">
                2019-06-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TS/" itemprop="url" rel="index">
                    <span itemprop="name">TS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function add(a:number, b:number = 1): number|string &#123;</span><br><span class="line">  &apos;use strict&apos;</span><br><span class="line">  console.log(this)</span><br><span class="line">  // console.log(arguments)</span><br><span class="line">  return a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="函数重载"><a href="#函数重载" class="headerlink" title="函数重载"></a>函数重载</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function add(n1: number, n2: number);</span><br><span class="line">function add(n1: string, n2: string);</span><br><span class="line">function add(n1, n2) &#123;</span><br><span class="line">  return n1 + n2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function add2&lt;T&gt;(n1: T, n2: T): T &#123;</span><br><span class="line">  return n1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">add(1, 2); // 3</span><br><span class="line">add(&apos;frank&apos;, &apos;jack&apos;); // &apos;frankjack&apos;</span><br><span class="line"></span><br><span class="line">add2(new Date(), new Date())</span><br></pre></td></tr></table></figure>
<h3 id="类型推论"><a href="#类型推论" class="headerlink" title="类型推论"></a>类型推论</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let myAdd: (baseValue: number, increment: number) =&gt; number = function(x, y) &#123; return x + y; &#125;;</span><br><span class="line">// 所以 TS 通过类型推论是可以知道 x y 的类型的，所以写类型和不写类型的这个粒度是怎么样的呢？需要思考和实践</span><br></pre></td></tr></table></figure>
<h3 id="类型兼容"><a href="#类型兼容" class="headerlink" title="类型兼容"></a>类型兼容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface Named &#123;</span><br><span class="line">  name: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let x: Named;</span><br><span class="line">let y = &#123; name: &apos;Alice&apos;, location: &apos;Seattle&apos; &#125;;</span><br><span class="line">x = y;</span><br><span class="line">// 直接赋值是报错的，但是这样就可以了</span><br></pre></td></tr></table></figure>
<p>规定返回值如果是源函数的返回值的子类型，那么 TS 就认为这是对的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  let x = () =&gt; (&#123; name: &apos;Alice&apos; &#125;);</span><br><span class="line">  let y = () =&gt; (&#123; name: &apos;Alice&apos;, location: &apos;Seattle&apos; &#125;);</span><br><span class="line"></span><br><span class="line">  x = y; // OK</span><br><span class="line">  y = x; // 反过来肯定不行</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/06/23/TS类/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/23/TS类/" itemprop="url">TS类</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-23T23:14:57+08:00">
                2019-06-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TS/" itemprop="url" rel="index">
                    <span itemprop="name">TS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="类"><a href="#类" class="headerlink" title="类"></a>类</h3><p>类就是创造对象的东西（描述对象有哪些属性）<br>对于 TS 来说，类可以让你的程序变得更加可预测（这个对象不会出现一些我不知道的属性，一切尽在我的掌握）</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">class Human extends Animal &#123;</span><br><span class="line">  // 声明类的属性</span><br><span class="line">  static color = &apos;red&apos;  </span><br><span class="line"></span><br><span class="line">  // 公有属性，默认就是 public，可以写可以不写</span><br><span class="line">  public name: string</span><br><span class="line"></span><br><span class="line">  // 访问器，自定义属性</span><br><span class="line">  _age: number</span><br><span class="line">  get age() &#123;</span><br><span class="line">    return this._age</span><br><span class="line">  &#125;</span><br><span class="line">  set age(val: number) &#123;</span><br><span class="line">    if (val &gt; 28) &#123;</span><br><span class="line">      this._age = 18</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      this._age = val</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  // 私有属性，只有这个类可以访问</span><br><span class="line">  private secret: number = 100</span><br><span class="line"></span><br><span class="line">  // 使用 constructor</span><br><span class="line">  constructor(name: string, kind: string, age = 18) &#123;</span><br><span class="line">    super(kind)  // 继承类</span><br><span class="line">    this.name = name</span><br><span class="line">    this.age = age</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 声明对象的函数属性</span><br><span class="line">  say(): string &#123;</span><br><span class="line">    this.move()</span><br><span class="line">    console.log(this.kind)</span><br><span class="line">    return &apos;i can move&apos;</span><br><span class="line">  &#125;</span><br><span class="line">  public smile() &#123;</span><br><span class="line">    console.log(&apos;smile&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 抽象类 也就是爸爸类（只描述有什么方法，并没有实现这些方法）</span><br><span class="line">// 也就是说，只要 class 里面的方法就必须实现，如果不实现，就需要加 abstract</span><br><span class="line">abstract class Animal &#123; // 这里必须写 abstract</span><br><span class="line">  abstract smile(): void // 这里也是</span><br><span class="line"></span><br><span class="line">  // 保护属性，可以在类和子类中使用</span><br><span class="line">  protected kind: string  </span><br><span class="line">  constructor(kind: string) &#123;</span><br><span class="line">    this.kind = kind</span><br><span class="line">  &#125;</span><br><span class="line">  move(): void &#123;</span><br><span class="line">    console.log(&apos;move&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="一些技巧"><a href="#一些技巧" class="headerlink" title="一些技巧"></a>一些技巧</h3><ul>
<li>TS 的类其实就是一个函数，一个构造函数</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">class Greeter &#123;</span><br><span class="line">  static standardGreeting = &quot;Hello, there&quot;;</span><br><span class="line">  greeting: string;</span><br><span class="line">  greet() &#123;</span><br><span class="line">    if (this.greeting) &#123;</span><br><span class="line">        return &quot;Hello, &quot; + this.greeting;</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        return Greeter.standardGreeting;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let greeter1: Greeter; // 可能还是感觉这里很多于</span><br><span class="line">greeter1 = new Greeter();</span><br><span class="line">console.log(greeter1.greet());</span><br><span class="line"></span><br><span class="line">let greeterMaker: typeof Greeter = Greeter;  // 注意这句话</span><br><span class="line">greeterMaker.standardGreeting = &quot;Hey there!&quot;;</span><br><span class="line"></span><br><span class="line">let greeter2: Greeter = new greeterMaker();</span><br><span class="line">console.log(greeter2.greet());</span><br></pre></td></tr></table></figure>
<ul>
<li>接口是低配版的类，类是高配版的接口。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  class Point &#123;</span><br><span class="line">    x: number</span><br><span class="line">    y: number</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  interface Point3d extends Point &#123;</span><br><span class="line">    z: number</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  let point3d: Point3d = &#123; x: 1, y: 2, z: 3 &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/06/11/TS接口/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/11/TS接口/" itemprop="url">TS接口</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-11T23:35:27+08:00">
                2019-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TS/" itemprop="url" rel="index">
                    <span itemprop="name">TS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>js 七种数据类型 + 枚举 + any + void + never<br>默认情况下 null 和 undefined 是所有类型的子类型，就是说你可以把 null 赋值给 string 类型的变量</p>
<h3 id="写法"><a href="#写法" class="headerlink" title="写法"></a>写法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">let a: null = null</span><br><span class="line">let b: undefined = undefined</span><br><span class="line"></span><br><span class="line">let c: boolean = true</span><br><span class="line">let d: number = 1.23</span><br><span class="line"></span><br><span class="line">let o: object = &#123;&#125;</span><br><span class="line">let s: symbol = Symbol()</span><br><span class="line"></span><br><span class="line">let e: number = 1</span><br><span class="line">// e = &apos;string&apos;</span><br><span class="line">let e1: any = 1</span><br><span class="line">e1 = &apos;string&apos;</span><br><span class="line"></span><br><span class="line">// let gender = &apos;man&apos;</span><br><span class="line">enum Gender &#123;</span><br><span class="line">  Man = &apos;m&apos;,</span><br><span class="line">  Woman = &apos;w&apos;</span><br><span class="line">&#125;</span><br><span class="line">let gender: Gender = Gender.Man</span><br><span class="line"></span><br><span class="line">function print(x): void &#123;</span><br><span class="line">  console.log(x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="类型断言"><a href="#类型断言" class="headerlink" title="类型断言"></a>类型断言</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;string&gt;someValue</span><br><span class="line">someValue as string</span><br></pre></td></tr></table></figure>
<p>当你在 TypeScript 里使用 JSX 时，只有 as 语法断言是被允许的</p>
<h3 id="类型转化"><a href="#类型转化" class="headerlink" title="类型转化"></a>类型转化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 类型转换</span><br><span class="line">let a: number = 1</span><br><span class="line">let b: string = a.toString()</span><br><span class="line"></span><br><span class="line">let c: string = &apos;1.2&apos;</span><br><span class="line">let d: number = parseFloat(c)</span><br><span class="line"></span><br><span class="line">let e: string = &apos;false&apos;</span><br><span class="line">let f: boolean = Boolean(e)</span><br><span class="line"></span><br><span class="line">if (e === undefined) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let o:object = &#123;name: &apos;xxx&apos;&#125;</span><br><span class="line">let s: string = JSON.stringify(o)</span><br></pre></td></tr></table></figure>
<h3 id="变量声明"><a href="#变量声明" class="headerlink" title="变量声明"></a>变量声明</h3><p>用 let 和 const<br>注意如果 const 声明的是对象，是地址不能变，不是对象不能变</p>
<h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><p>接口就是用代码描述一个对象必须有什么属性（包括方法），但是有没有其他属性就不管了</p>
<h3 id="声明对象"><a href="#声明对象" class="headerlink" title="声明对象"></a>声明对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface Human &#123;</span><br><span class="line">  name: string</span><br><span class="line">  // readonly name: string</span><br><span class="line">  age: number</span><br><span class="line">  shape: Shape</span><br><span class="line">  likeGame?: Array&lt;string&gt;</span><br><span class="line">  say(word: string): void</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>只读属性 readonly，用作声明属性，const 用作声明变量</li>
<li>可选属性 加？</li>
<li>属性是函数 say(word: string): void</li>
</ul>
<h3 id="传入了-interface-之外的属性-？"><a href="#传入了-interface-之外的属性-？" class="headerlink" title="传入了 interface 之外的属性 ？"></a>传入了 interface 之外的属性 ？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">interface SquareConfig &#123;</span><br><span class="line">    color?: string;</span><br><span class="line">    width?: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function createSquare(config: SquareConfig): void &#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let mySquare = createSquare(&#123; colour: &quot;red&quot;, width: 100 &#125;);</span><br></pre></td></tr></table></figure>
<p>想要传入 Interface 之外的属性，可以：</p>
<ol>
<li>使用类型断言</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let mySquare = createSquare(&#123; width: 100, opacity: 0.5 &#125; as SquareConfig);</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>使用索引签名</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface SquareConfig &#123;</span><br><span class="line">    color?: string;</span><br><span class="line">    width?: number;</span><br><span class="line">    [propName: string]: any;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="interface-对象，这个对象是一个函数"><a href="#interface-对象，这个对象是一个函数" class="headerlink" title="interface 对象，这个对象是一个函数"></a>interface 对象，这个对象是一个函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">interface Add &#123;</span><br><span class="line">  (a: number, b: number): number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let add: Add = function(a, b) &#123;</span><br><span class="line">  return a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="这个函数的属性也是函数"><a href="#这个函数的属性也是函数" class="headerlink" title="这个函数的属性也是函数"></a>这个函数的属性也是函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">第一种</span><br><span class="line">interface Add &#123;</span><br><span class="line">  (a: number, b: number): number</span><br><span class="line">  // minus(c: number, d: number): number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let add: Add = ((): Add =&gt; &#123;</span><br><span class="line">  let x:any = function(a, b) &#123;</span><br><span class="line">    return a + b</span><br><span class="line">  &#125;</span><br><span class="line">  x.minus = function(c: number, d: number): number &#123;</span><br><span class="line">    return c - d</span><br><span class="line">  &#125;</span><br><span class="line">  return x</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">第二种</span><br><span class="line">class Adds &#123;</span><br><span class="line">   minus(c: number, d: number): number</span><br><span class="line">&#125;</span><br><span class="line">interface Add extends Adds &#123;</span><br><span class="line">  (a: number, b: number): number</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="interface-的对象是一个数组"><a href="#interface-的对象是一个数组" class="headerlink" title="interface 的对象是一个数组"></a>interface 的对象是一个数组</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">interface StringArray &#123;</span><br><span class="line">  [index: number]: string;</span><br><span class="line">&#125;</span><br><span class="line">let myArray: StringArray;</span><br><span class="line">myArray = [&quot;Bob&quot;, &quot;Fred&quot;];</span><br><span class="line"></span><br><span class="line">let myStr: string = myArray[0];</span><br></pre></td></tr></table></figure>
<h3 id="interface-可以继承"><a href="#interface-可以继承" class="headerlink" title="interface 可以继承"></a>interface 可以继承</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">interface Shape &#123;</span><br><span class="line">  color: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Square extends Shape &#123;</span><br><span class="line">  sideLength: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let square = &lt;Square&gt;&#123;&#125;;</span><br><span class="line">square.color = &quot;blue&quot;;</span><br><span class="line">square.sideLength = 10;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/05/23/nuxt-开发官网/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/23/nuxt-开发官网/" itemprop="url">nuxt 开发官网</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-23T09:38:48+08:00">
                2019-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/总结/" itemprop="url" rel="index">
                    <span itemprop="name">总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- 1. 刷文档 -->
<h3 id="文件目录"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录</h3><p>nuxt 不会扩展 components 下面的组件，意味着组件没有 asyncData 的方法特性</p>
<p>layouts 的目录名字不能修改</p>
<p>middleware 中间件允许自定义一个函数运行在一个页面或者一组页面渲染之前</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export default function (context) &#123;</span><br><span class="line">  context.userAgent = process.server ? context.req.headers[&apos;user-agent&apos;] : navigator.userAgent</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>pages 目录不可更改，nuxt 框架读取该目录下的所有 .vue 文件并自动生成路由配置文件<br>下面这张图就是 pages 最关键的一些属性 <img src="https://i.loli.net/2019/05/23/5ce6329c82dd231257.jpg" alt="1558590067(1).jpg"></p>
<p>plugins 目录用于组织那些需要在 根 vue 实例化之前运行的 js 插件(有个疑问就是现在的项目没有使用 es6 编译的插件，这个先 mark 一下)</p>
<p>static 下的文件直接映射到根目录下，不会用 webpack 进行编译</p>
<p>nuxt.config.js 用于覆盖默认的配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">## babel 配置</span><br><span class="line">默认为 @nuxt/babel-preset-app 在client构建中是ie：&apos;9&apos;，在server构建中是node:&apos;current&apos;。</span><br><span class="line">&#123;</span><br><span class="line">  babelrc: false,</span><br><span class="line">  cacheDirectory: undefined,</span><br><span class="line">  presets: [&apos;@nuxt/babel-preset-app&apos;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>… 配置有点多</p>
<h3 id="一些问题"><a href="#一些问题" class="headerlink" title="一些问题"></a>一些问题</h3><p>其实项目都是vue，而且静态居多，好像没有什么特别有印象的问题</p>
<p>其实最主要就是 nuxt.config.js, 有很多功能可以直接在这里实现</p>
<p>最后上线的时候遇到了一个问题，有利于搜索引擎抓取的路径地图配置文件</p>
<p>是一个 sitemap 的 xml 文件，以前没接触过，这个文件直接用抓取工具生成就可以</p>
<p>还需要一个 robots.txt 文件制定 sitemap 的路径</p>
<p>这两个文件都需要放到 static 下面，这样最后打包的时候会直接生成文件在项目的根目录下面</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/05/23/TS命令行/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/23/TS命令行/" itemprop="url">TS命令行</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-23T01:25:08+08:00">
                2019-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TS/" itemprop="url" rel="index">
                    <span itemprop="name">TS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="最简单的命令行程序"><a href="#最简单的命令行程序" class="headerlink" title="最简单的命令行程序"></a>最简单的命令行程序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">## shebang</span><br><span class="line">#!/usr/bin/env ts-node</span><br><span class="line">console.log(&apos;hello&apos;)</span><br><span class="line"></span><br><span class="line">## 接着给文件添加可执行权限</span><br><span class="line">chmod +x ./1.ts</span><br><span class="line"></span><br><span class="line">## 执行 ./1.ts</span><br><span class="line">就能看到 hello</span><br></pre></td></tr></table></figure>
<h3 id="接受命令行参数"><a href="#接受命令行参数" class="headerlink" title="接受命令行参数"></a>接受命令行参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env ts-node</span><br><span class="line">console.log(process.argv)</span><br></pre></td></tr></table></figure>
<p>执行会报错，2.ts(2,13): error TS2304: Cannot find name ‘process’. 找不到 process<br>实际上我们在项目中经常用 process.NODE.env 这种获取环境变量，process 就是 Node.js 的全局变量，不可能找不到</p>
<p>这就是 TS 的厉害之处：如果你不告诉我 process 是什么，我就不允许你用 process</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @types/node</span><br></pre></td></tr></table></figure>
<p>执行之后再次打开可以看到参数了</p>
<h3 id="加法的例子"><a href="#加法的例子" class="headerlink" title="加法的例子"></a>加法的例子</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env ts-node</span><br><span class="line">console.log(&apos;hello world&apos;)</span><br><span class="line">const a = parseInt(process.argv[2])</span><br><span class="line">const b = parseInt(process.argv[3])</span><br><span class="line"></span><br><span class="line">if (Number.isNaN(a) || Number.isNaN(b)) &#123;</span><br><span class="line">  console.log(&apos;参数必须是数字&apos;)</span><br><span class="line">  process.exit(1)</span><br><span class="line">&#125;</span><br><span class="line">console.log(a + b)</span><br><span class="line">process.exit(0)</span><br></pre></td></tr></table></figure>
<h3 id="族谱的例子"><a href="#族谱的例子" class="headerlink" title="族谱的例子"></a>族谱的例子</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env ts-node</span><br><span class="line">&#123;</span><br><span class="line">  class Person &#123;</span><br><span class="line">    public children: Person[] = []</span><br><span class="line">    constructor(public name: string) &#123;&#125;</span><br><span class="line">    addPerson(child: Person): void &#123;</span><br><span class="line">      this.children.push(child)</span><br><span class="line">    &#125;</span><br><span class="line">    introduce(n?: number): void &#123;</span><br><span class="line">      n = n || 1</span><br><span class="line">      const prefix = &apos;--&apos;.repeat(n - 1)</span><br><span class="line">      console.log(`$&#123;prefix&#125;$&#123;this.name&#125;`)</span><br><span class="line">      this.children.forEach((child: Person) =&gt; &#123;</span><br><span class="line">        child.introduce(n + 1)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const grandPa = new Person(&apos;爷爷&apos;)</span><br><span class="line">  const child1 = new Person(&apos;大伯&apos;)</span><br><span class="line">  const child2 = new Person(&apos;二伯&apos;)</span><br><span class="line">  const child11 = new Person(&apos;大哥&apos;)</span><br><span class="line">  const child12 = new Person(&apos;大姐&apos;)</span><br><span class="line">  const child21 = new Person(&apos;二哥&apos;)</span><br><span class="line">  const child22 = new Person(&apos;二姐&apos;)</span><br><span class="line"></span><br><span class="line">  grandPa.addPerson(child1)</span><br><span class="line">  child1.addPerson(child11)</span><br><span class="line">  child1.addPerson(child12)</span><br><span class="line">  grandPa.addPerson(child2)</span><br><span class="line">  child2.addPerson(child21)</span><br><span class="line">  child2.addPerson(child22)</span><br><span class="line"></span><br><span class="line">  grandPa.introduce()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/05/19/TS安装与调试/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/19/TS安装与调试/" itemprop="url">TS安装与调试</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-19T23:57:53+08:00">
                2019-05-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TS/" itemprop="url" rel="index">
                    <span itemprop="name">TS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install typescript -g</span><br><span class="line">npm install ts-node -g</span><br></pre></td></tr></table></figure>
<h3 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mkdir .vscode</span><br><span class="line">touch .vscode/launch.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;configurations&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot;: &quot;ts-node&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;node&quot;,</span><br><span class="line">      &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">      &quot;program&quot;: &quot;/Users/shiguangwei/.nvm/versions/node/v11.13.0/bin/ts-node&quot;,</span><br><span class="line">      &quot;args&quot;: [</span><br><span class="line">        &quot;$&#123;relativeFile&#125;&quot;</span><br><span class="line">      ],</span><br><span class="line">      &quot;cwd&quot;: &quot;$&#123;workspaceRoot&#125;&quot;,</span><br><span class="line">      &quot;protocol&quot;: &quot;inspector&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>touch 1.ts, 输入 console.log(‘hello joyowo’) 点击调试即可</p>
<h3 id="查看五分钟入门"><a href="#查看五分钟入门" class="headerlink" title="查看五分钟入门"></a>查看五分钟入门</h3><p><a href="https://www.tslang.cn/docs/handbook/typescript-in-5-minutes.html" target="_blank" rel="noopener">五分钟入门</a></p>
<h3 id="练习一下"><a href="#练习一下" class="headerlink" title="练习一下"></a>练习一下</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">enum Gender &#123;</span><br><span class="line">  Man,</span><br><span class="line">  Woman</span><br><span class="line">&#125;</span><br><span class="line">interface person &#123;</span><br><span class="line">  age: number,</span><br><span class="line">  gender: Gender</span><br><span class="line">&#125;</span><br><span class="line">function marry(a: person, b: person): [person, person] &#123;</span><br><span class="line">  if(a.gender!==b.gender) &#123;</span><br><span class="line">    return [a,b]</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    throw new Error(&apos;不能结婚&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var c = marry(&#123;gender: Gender.Man, age: 28&#125;, &#123;gender: Gender.Woman, age: 18&#125;)</span><br><span class="line">console.log(c)</span><br><span class="line"></span><br><span class="line">function sorted(a: number[]):number[] &#123;</span><br><span class="line">  return a.sort((a, b) =&gt; b - a)</span><br><span class="line">&#125;</span><br><span class="line">console.log(sorted([1,23,2,42,21]))</span><br><span class="line"></span><br><span class="line">function add(a: string, b: string): string</span><br><span class="line">function add(a: number, b: number): number</span><br><span class="line">function add(a: any, b: any): any &#123;</span><br><span class="line">  return a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(add(1, 2))</span><br><span class="line"></span><br><span class="line">function min(a: number, b: number): number &#123;</span><br><span class="line">  if (a &lt; b) &#123;</span><br><span class="line">    return ;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    return b;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var c = min(1, 2);</span><br><span class="line">console.log(c);</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/05/18/BFC-和-IFC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/18/BFC-和-IFC/" itemprop="url">BFC 和 IFC</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-18T16:29:35+08:00">
                2019-05-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/css/" itemprop="url" rel="index">
                    <span itemprop="name">css</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h3><blockquote>
<p>一个bfc包含内部所有元素的内容，除了后代也是bfc的元素</p>
</blockquote>
<h4 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h4><ol>
<li>如果它是 BFC，就会父元素把子元素包起来<br><em>这不是清除浮动，这是bfc</em></li>
<li>兄弟元素就会划清界限，不会重叠<br><em>float + div 做自适应布局，第一个元素float，第二个bfc，就会两个分开</em></li>
</ol>
<h3 id="下面这些会触发-BFC"><a href="#下面这些会触发-BFC" class="headerlink" title="下面这些会触发 BFC"></a>下面这些会触发 BFC</h3><ol>
<li>根元素</li>
<li>浮动元素</li>
<li>定位为 absolute 或者 fixed</li>
<li>display: inline-block</li>
<li>display: table-cell</li>
<li>overflow 不是 visible 的元素</li>
<li>display: flow-root （css专门用来bfc的）</li>
</ol>
<h3 id="IFC"><a href="#IFC" class="headerlink" title="IFC"></a>IFC</h3><p>主要有三个点</p>
<ol>
<li><p>font-size<br>一个字体会定义一个 em-squre, 他是用来盛放字体的容器，一般是宽高为 100 的相对单位</p>
</li>
<li><p>line-height<br>一个内联元素真实字占的高度，字体在其中自己居中就行了</p>
</li>
<li><p>vertical-align<br>top middle bottom text-top text-bottom 不同字体是无法对齐的</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/05/09/css堆叠上下文/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/09/css堆叠上下文/" itemprop="url">css堆叠上下文</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-09T08:22:01+08:00">
                2019-05-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/css/" itemprop="url" rel="index">
                    <span itemprop="name">css</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="堆叠顺序"><a href="#堆叠顺序" class="headerlink" title="堆叠顺序"></a>堆叠顺序</h3><ol start="0">
<li>z-index = -1</li>
<li>background</li>
<li>border</li>
<li>div 块级元素</li>
<li>浮动元素</li>
<li>文字 内联元素</li>
<li>position z-index=0</li>
<li>position z-index&gt;0</li>
</ol>
<p>PS. 如果兄弟元素重叠，后面的盖在前面的身上</p>
<h3 id="堆叠上下文"><a href="#堆叠上下文" class="headerlink" title="堆叠上下文"></a>堆叠上下文</h3><p><strong>我们知道一些属性能触发堆叠上下文，但是我们不知道堆叠上下文是什么</strong></p>
<ol>
<li>根元素 HTML</li>
<li>z-index 不为 auto 的 relative absolute 定位</li>
<li>opacity 小于 1 的元素</li>
<li>transform 不为 none 的元素</li>
<li>position: fixed 的元素</li>
<li>-webkit-overflow-scrolling: touch 的元素</li>
<li>isolation: isolute 的元素<br>…</li>
</ol>
<p>触发堆叠上下文后，会解决 z-index 的问题，上面 0 就会在 2 和 3 之间</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/04/24/h5项目总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/24/h5项目总结/" itemprop="url">h5项目总结（xl）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-24T15:53:44+08:00">
                2019-04-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/总结/" itemprop="url" rel="index">
                    <span itemprop="name">总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- 思路 -->
<!-- 1 项目搭建 -->
<!-- 2 自适应的问题 -->
<!-- 3 关于微信用户无感登录 -->
<!-- 4 toast 不是全局的问题 -->
<!-- 5 关于项目优化 -->
<p>最近做了一个 h5 的项目，技术栈是 vue-cli3 vue 全家桶, UI 有用 cube-ui, NProgress, 用了一个 blueimp-md5 的 md5 库， 样式用的是 scss + postcss-px2rem, 在 vuex 层用 vuex-persistedstate 做数据持久化</p>
<h3 id="项目搭建"><a href="#项目搭建" class="headerlink" title="项目搭建"></a>项目搭建</h3><ul>
<li>用 vue-cli3 搭建项目，启动 vue ui，直接可以在网页上管理项目</li>
<li>用 .env.production 这种文件提供环境变量，供 webpack 不同的 mode 打包使用</li>
<li><p>向外暴露的只有一个 vue.config.js，其他都写到了 webpack 的包里，简单列几个这个文件的属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">BASE_URL 已经被废除了 重新用回了 publicPath 指定</span><br><span class="line"></span><br><span class="line">chainWebpack 是一个函数，可以对 webpack 的配置进行更细粒度的修改，而且可以链式调用</span><br><span class="line">chainWebpack: config =&gt; &#123;</span><br><span class="line">  config.resolve.alias</span><br><span class="line">  .set(&apos;@&apos;, resolve(&apos;src&apos;))</span><br><span class="line">  .set(&apos;_c&apos;, resolve(&apos;src/components&apos;))</span><br><span class="line">  .set(&apos;_api&apos;, resolve(&apos;src/api&apos;))</span><br><span class="line">  .set(&apos;_lib&apos;, resolve(&apos;src/lib&apos;))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">productionSourceMap: false 线上直接关闭 sourceMap</span><br><span class="line"></span><br><span class="line">devServer: &#123;</span><br><span class="line">  proxy: process.env.VUE_APP_API_URL</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>项目结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">|-- .editorconfig                         </span><br><span class="line">|-- .env.development                          </span><br><span class="line">|-- .env.porduction                       </span><br><span class="line">|-- .env.stage                              </span><br><span class="line">|-- .env.test1                              </span><br><span class="line">|-- .env.test2</span><br><span class="line">|-- package.json</span><br><span class="line">|-- public</span><br><span class="line">|   |-- data.json</span><br><span class="line">|   |-- favicon.ico</span><br><span class="line">|   `-- index.html</span><br><span class="line">|-- src</span><br><span class="line">|   |-- App.vue</span><br><span class="line">|   |-- api</span><br><span class="line">|   |-- assets</span><br><span class="line">|   |-- components</span><br><span class="line">|   |-- cube-ui.js</span><br><span class="line">|   |-- lib</span><br><span class="line">|   |-- main.js</span><br><span class="line">|   |-- router</span><br><span class="line">|   |-- store</span><br><span class="line">|   |-- theme.styl</span><br><span class="line">|   `-- views</span><br><span class="line">|-- vue.config.js</span><br><span class="line">`-- yarn.lock</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><em>吐槽</em></strong> <strong>如果不指定 .env 文件的 NODE_ENV 为production，打包的时候都会按照 development 模式来，所以如果要线上环境打包的效果，就要显式得指定 NODE_ENV 为 production， 环境变量可以用 CURRNET_MODE 这种变量来代替</strong></p>
<h3 id="自适应的问题"><a href="#自适应的问题" class="headerlink" title="自适应的问题"></a>自适应的问题</h3><p>项目中使用 postcss-px2rem 直接把 px 转成 rem 但是和 px 是一样的，我也不知道当时自己为啥要用 rem<br>当然遇到的问题就一个 login 的页面遇到了一个小键盘会导致页面缩小的 bug， 通过多方尝试，最终还是在入口把 window.innerHeight 记录下来， 在需要 100vh 的页面，渲染完毕后用 js 把 style.height 设置成 window.innerHeight</p>
<h3 id="关于微信用户无感登录"><a href="#关于微信用户无感登录" class="headerlink" title="关于微信用户无感登录"></a>关于微信用户无感登录</h3><p>关于绑定微信主要是做了一个绑定的功能，用来做免密登录，而且这个方案我们用的是第一种，就是不用用户手动授权就可以拿到用户 code 的方式<br>实现的主要方式就是在 router 的 beforeEach 钩子判断 openid 是否已经存在，如果没有，就去重定向获取 code，然后利用 code 去获取 openid 然后存下来<br>在即将进入页面的 beforeEnter 的路由独享里面，可以根据是不是微信来实现去免密登录还是继续去登录</p>
<p>这种方式就可以实现分治，不用在一大推的回调里面去判断之后的逻辑<br>通过这个需求，算是对 vue-router 的钩子有了一个相对完整的理解</p>
<h3 id="toast-不是全局的问题"><a href="#toast-不是全局的问题" class="headerlink" title="toast 不是全局的问题"></a>toast 不是全局的问题</h3><p>项目中直接用的 cube-ui 的 toast 组件，虽然文档中所说的是通过 create-api 构造的，这样可以在组件或者 js 文件中，但是在组件中应用的话, 为啥把 append 到组件中呢，尽管我已经把 toast 创建好了 mixin 到了全局，也有可能是我使用方式不对，可能用插件的方式会解决这个问题</p>
<h3 id="关于项目优化"><a href="#关于项目优化" class="headerlink" title="关于项目优化"></a>关于项目优化</h3><p>项目其实没有怎么优化，通过 chrome 的 audits 好想没看出啥来，项目资源最大的 文件 400 多k， 项目总共大小 1.7M，所有的静态资源都放在同一个域名在<br>项目开启了 ETag: “5cc03a0b-45e9” Cache-Control没有设置 Cache-Control: no-cache</p>
<p>虽然自己都是可以修改 webapck 中的相关配置，但是默认的配置已经够强大了，基本能满足需求</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="iiicon">
            
              <p class="site-author-name" itemprop="name">iiicon</p>
              <p class="site-description motion-element" itemprop="description">coding note and life perception 代码笔记和生活感悟</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">117</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">49</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">iiicon</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
