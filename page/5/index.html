<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans,en,default">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="coding note and life perception 代码笔记和生活感悟">
<meta property="og:type" content="website">
<meta property="og:title" content="一个没有情趣和色彩的人">
<meta property="og:url" content="https://sgw.wiki/page/5/index.html">
<meta property="og:site_name" content="一个没有情趣和色彩的人">
<meta property="og:description" content="coding note and life perception 代码笔记和生活感悟">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一个没有情趣和色彩的人">
<meta name="twitter:description" content="coding note and life perception 代码笔记和生活感悟">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://sgw.wiki/page/5/">





  <title>一个没有情趣和色彩的人</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一个没有情趣和色彩的人</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">正经点 少说话</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/08/05/ES6对象扩展/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/05/ES6对象扩展/" itemprop="url">ES6对象扩展</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-05T00:11:22+08:00">
                2019-08-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="动态属性名"><a href="#动态属性名" class="headerlink" title="动态属性名"></a>动态属性名</h3><pre><code>var o = {[name]: 1}
</code></pre><h3 id="属性可以是一个函数、getter、setter-方法"><a href="#属性可以是一个函数、getter、setter-方法" class="headerlink" title="属性可以是一个函数、getter、setter 方法"></a>属性可以是一个函数、getter、setter 方法</h3><pre><code>var o = {_age: 18, get age() {return _age}, set age(a){return a}}
</code></pre><h3 id="一道题"><a href="#一道题" class="headerlink" title="一道题"></a>一道题</h3><pre><code>let i = 0
Object.defineProperty(window, a, {get() { i +=1; return i}})
a == 1 &amp;&amp; a==2 &amp;&amp; a == 3 //true
</code></pre><h3 id="浅复制"><a href="#浅复制" class="headerlink" title="浅复制"></a>浅复制</h3><pre><code>Object.assign 会触发 setter
... 不会
</code></pre><h3 id="在旧的对象上添加-set-get"><a href="#在旧的对象上添加-set-get" class="headerlink" title="在旧的对象上添加 set get"></a>在旧的对象上添加 set get</h3><pre><code>Object.defineProperty(window, a, {
  get() {},
  set() {},
  configurable: true,
  enumerable: true,
  value: &apos;&apos;,
  writable: false
})
</code></pre><p>获取这些属性可以用 <code>Object.getOwnPropertyDescriptor(window, a)</code></p>
<p>如果对象的属性是 symbol 可以用 <code>Object.getOwnPropertySymbols(window)</code></p>
<h3 id="关于原型"><a href="#关于原型" class="headerlink" title="关于原型"></a>关于原型</h3><ul>
<li><p>获取<br><code>Object.getPrototypeOf()</code></p>
</li>
<li><p>设置<br><code>Object.create()</code></p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/08/04/ES6之迭代器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/04/ES6之迭代器/" itemprop="url">ES6之迭代器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-04T16:46:41+08:00">
                2019-08-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h3><blockquote>
<p>迭代器是一个对象，它定义一个序列，并在终止时可能返回一个返回值。它知道如何每次访问集合中的一项， 并跟踪该序列中的当前位置。<br>它提供了一个 next() 方法，用来返回序列中的下一项。这个方法返回包含两个属性：done 和 value。迭代器对象一旦被创建，就可以反复调用 next()。</p>
</blockquote>
<p>创建一个对象，他有 next 方法，可以一直调用，这就是迭代器</p>
<pre><code>function fn() {
  let value = 0
  return {
    next: function() {
      value += 1
      if (value &gt; 10) {
        throw new Error(&apos;不能大与10&apos;)
      }
      if (value === 10) {
        return { value, done: true }
      }
      return {
        value,
        done: false
      }
    }
  }
}
</code></pre><h3 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h3><blockquote>
<p>虽然自定义的迭代器是一个有用的工具，但由于需要显式地维护其内部状态，因此需要谨慎地创建。生成器函数提供了一个强大的选择：它允许你定义一个包含自有迭代算法的函数， 同时它可以自动维护自己的状态。</p>
</blockquote>
<pre><code>function* fn() {
  let value = 0
  while(true) {
    value += 1
    yield value
  }
}
</code></pre><p>这个函数的功能和上面迭代器的功能是一样的，称为生成器，是迭代器的语法糖</p>
<h3 id="可迭代对象"><a href="#可迭代对象" class="headerlink" title="可迭代对象"></a>可迭代对象</h3><blockquote>
<p>若一个对象拥有迭代行为，比如在 for…of 中会循环哪些值，那么那个对象便是一个可迭代对象。一些内置类型，如 Array 或 Map 拥有默认的迭代行为，而其他类型（比如 Object）则没有。<br>为了实现可迭代，一个对象必须实现 @@iterator 方法，这意味着这个对象（或其原型链中的任意一个对象）必须具有一个带 Symbol.iterator 键（key）的属性。</p>
</blockquote>
<p>这样我们就可以自定义可迭代对象</p>
<pre><code>let myIterable = {
  *[Symbol.iterator]() {
    yield 1
    yield 2
    yield 3
  }
}
for (const iterator of myIterable) {
  console.log(iterator)
}
</code></pre><h3 id="内置的可迭代对象"><a href="#内置的可迭代对象" class="headerlink" title="内置的可迭代对象"></a>内置的可迭代对象</h3><p>String, Array, TypedArray, Map, Set 他们的原型对象都有一个 Symbol.iterator 函数</p>
<h3 id="用于可迭代对象的语法（语法糖）"><a href="#用于可迭代对象的语法（语法糖）" class="headerlink" title="用于可迭代对象的语法（语法糖）"></a>用于可迭代对象的语法（语法糖）</h3><ul>
<li><p>for of<br>我们如果要调用生成器，只要一直 .next 就行，js 提供了一个语法糖，那就是 for of</p>
</li>
<li><p>展开语法<br>  […’abc’] // [‘a’, ‘b’, ‘c’]</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/08/04/ES6三点运算符和新版字符串/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/04/ES6三点运算符和新版字符串/" itemprop="url">ES6 三点运算符和新版字符串</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-04T16:06:54+08:00">
                2019-08-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="三点运算符"><a href="#三点运算符" class="headerlink" title="三点运算符"></a>三点运算符</h2><h3 id="函数的默认参数"><a href="#函数的默认参数" class="headerlink" title="函数的默认参数"></a>函数的默认参数</h3><pre><code>function(x = 10)
</code></pre><h3 id="剩余参数"><a href="#剩余参数" class="headerlink" title="剩余参数"></a>剩余参数</h3><pre><code>Array.prototype.slice.call(arguments, 2)
Array.from(arguments).slice(2)
function fn(a, b, ...c)
</code></pre><h3 id="展开操作符"><a href="#展开操作符" class="headerlink" title="展开操作符"></a>展开操作符</h3><pre><code>[...iteralableObject] = [1,2,3]
[0, ...iteralableObject, 1, 2]
</code></pre><h3 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h3><pre><code>[a, b] = [b, a]
[a, b, ...rest] = [1, 2, 3]
let {name, age} = person
[a = 5, b = 7] = [1]
[a, b] = f()
[a, ,b] = f()
{p: foo, q: bar} = o
let {a = 10, b = 5} = {a: 4}
let {a:aa = 10, b:bb = 5} = {a: 3};
对象的浅拷贝（JSON， ...，Object.assign）
对象合并
</code></pre><h3 id="对象属性增强"><a href="#对象属性增强" class="headerlink" title="对象属性增强"></a>对象属性增强</h3><pre><code>let obj = { x, y }
obj = {[&apos;baz&apos;+qux()]: 33}
函数属性可以缩写
</code></pre><h2 id="新版字符串"><a href="#新版字符串" class="headerlink" title="新版字符串"></a>新版字符串</h2><h3 id="多行字符串，插值"><a href="#多行字符串，插值" class="headerlink" title="多行字符串，插值"></a>多行字符串，插值</h3><pre><code>let a = `a${name}
         b
        `
</code></pre><h3 id="函数接字符串"><a href="#函数接字符串" class="headerlink" title="函数接字符串"></a>函数接字符串</h3><pre><code>fn`${name} 是一个 ${person}`
</code></pre><p><a href="https://github.com/styled-components/styled-components" target="_blank" rel="noopener">style.component</a>就是这个用法</p>
<pre><code>const Title = styled.h1`
  font-size: 1.5em;
  text-align: center;
  color: palevioletred;
`;
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/07/31/ES6箭头函数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/31/ES6箭头函数/" itemprop="url">ES6箭头函数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-31T23:27:32+08:00">
                2019-07-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="箭头函数的写法"><a href="#箭头函数的写法" class="headerlink" title="箭头函数的写法"></a>箭头函数的写法</h3><p>好像抄袭自 coffeescript, 叫做 <code>fat Function</code></p>
<pre><code>() =&gt; {}
</code></pre><p>coffeescript 还有一个 <code>empty Function</code></p>
<pre><code>() -&gt; {} 会被解析成 function() {}
</code></pre><h3 id="箭头函数的优点"><a href="#箭头函数的优点" class="headerlink" title="箭头函数的优点"></a>箭头函数的优点</h3><ol>
<li>简洁，箭头函数表达式对非方法函数是最合适的</li>
<li>没有 this，也就是父级作用域的 this</li>
<li>箭头函数不绑定 Arguments 对象，使用剩余参数是相较使用 arguments 对象的更好选择。</li>
<li>由于 箭头函数没有自己的 this 指针，通过 call() 或 apply() 方法调用一个函数时，只能传递参数（不能绑定 this—译者注），他们的第一个参数会被忽略。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/07/30/ES6之let和const/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/30/ES6之let和const/" itemprop="url">ES6之let和const</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-30T23:11:13+08:00">
                2019-07-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="相关概念"><a href="#相关概念" class="headerlink" title="相关概念"></a>相关概念</h3><ul>
<li>let 作用域在{}之间</li>
<li>在 let a 之前使用，报错</li>
<li>重复 let 报错</li>
<li>const 只有一次赋值机会，而且必须立马赋值</li>
</ul>
<h3 id="var-变量提升"><a href="#var-变量提升" class="headerlink" title="var 变量提升"></a>var 变量提升</h3><pre><code>function fn() {
  if (true) {
    console.log(a)
  } else {
    var a = 1
  }
}
</code></pre><p>相当于这样</p>
<pre><code>function fn() {
  var a
  if (true) {
    console.log(a)
  } else {
    a = 1
  }
}
console.log(a)
</code></pre><h3 id="想办法不暴露全局变量"><a href="#想办法不暴露全局变量" class="headerlink" title="想办法不暴露全局变量"></a>想办法不暴露全局变量</h3><p>可以用立即执行函数</p>
<pre><code>(function(){
  var a = 1
  window.xxx = function() { console.log(a) }
}())
</code></pre><p>或者 let</p>
<pre><code>{
  let a = 1
  window.xxx = function() { console.log(a) }
}
</code></pre><h3 id="let-临时死区（temp-dead-zone）"><a href="#let-临时死区（temp-dead-zone）" class="headerlink" title="let 临时死区（temp dead zone）"></a>let 临时死区（temp dead zone）</h3><pre><code>{
  let a = 1
  {
    console.log(a) // 如果一个块中有变量声明，必须先声明再使用
    let a = 2
  }
}
</code></pre><h3 id="一些题"><a href="#一些题" class="headerlink" title="一些题"></a>一些题</h3><h4 id="修改全局变量"><a href="#修改全局变量" class="headerlink" title="修改全局变量"></a>修改全局变量</h4><pre><code>{
  var value = 1

  function foo() {
    console.log(value)
  }

  function bar() {
    value = 2

    foo()
  }
  bar()
}
</code></pre><p>注意和词法作用域做区分</p>
<pre><code>{
var value = 1

function foo() {
  console.log(value)
}

function bar() {
var value = 2
    foo()
}
bar()
}
</code></pre><h3 id="for-循环中的全局变量"><a href="#for-循环中的全局变量" class="headerlink" title="for 循环中的全局变量"></a>for 循环中的全局变量</h3><pre><code>{
  for (var index = 0; index &lt; 6; index++) {
  }
  console.log(index)  // 输出 6
}
</code></pre><p>另一种情况</p>
<pre><code>{
  for (var index = 0; index &lt; 6; index++) {
    function fn() {
      console.log(index)
    }
    button.onclick = fn // 输出 6
  }
}
</code></pre><p>这种情况换一种写法</p>
<pre><code>{
  for (var index = 0; index &lt; 6; index++) {
    button[index].onclick = function() {
      console.log(index) // 输出 6
    }
  }
}
</code></pre><p>我们用一个变量把 index 保存下来</p>
<pre><code>{
  for (var index = 0; index &lt; 6; index++) {
    j = index
    button[j].onclick = function() {
      console.log(j)  // 这个时候输出 5，一共维护两个变量，index 和 j，index会++
    }
  }
}
</code></pre><p>使用 let 作为局部变量</p>
<pre><code>{
  for (var index = 0; index &lt; 6; index++) {
    let j = index // 这就很关键了，维护 6 个 j
    button[j].onclick = function() {
      console.log(j)  // 0 1 2 3 4 5
    }
  }
}
</code></pre><p>也可以使用函数来使用局部变量</p>
<pre><code>{
  for (var index = 0; index &lt; 6; index++) {
    (function(){
      var j = arguments[0] // 这样在函数中维护 6 个 j
      button[j].onclick = function() {
        console.log(j)  // 0 1 2 3 4 5
      }
    })(index)
  }
}
{
  for (var index = 0; index &lt; 6; index++) {
    (function(j){
      button[j].onclick = function() {
        console.log(j)  // 0 1 2 3 4 5
      }
    })(index)
  }
}
</code></pre><h3 id="for-循环魔法"><a href="#for-循环魔法" class="headerlink" title="for 循环魔法"></a>for 循环魔法</h3><p>我们知道其实最简单的写法是这样</p>
<pre><code>{
  for (let index = 0; index &lt; 6; index++) {
    button[index].onclick = function() {
      console.log(index)  // 0 1 2 3 4 5
    }
  }
}
</code></pre><p>但其实 js 帮我们创建了一个额外的变量 _index, 因为 index 并不在块里<br>for 循环在执行的时候把 _index 赋给 index，最后执行完后再把 index 赋给 _index</p>
<pre><code>{
  for (let _index = 0; _index &lt; 6; _index++) {
    let index = _index
    button[index].onclick = function() {
      console.log(index)  // 0 1 2 3 4 5
    }
  }
}
</code></pre><p>这样其实在内部共维护了 7 个变量</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/07/28/react生命周期/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/28/react生命周期/" itemprop="url">React生命周期</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-28T23:40:09+08:00">
                2019-07-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React/" itemprop="url" rel="index">
                    <span itemprop="name">React</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="react-生命周期"><a href="#react-生命周期" class="headerlink" title="react 生命周期"></a>react 生命周期</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">RA11</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [x, setX] = useState(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> [y, setY] = useState(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> onclick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    setX(x + <span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> handleApp = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 用来做销毁App</span></span><br><span class="line">    setY(<span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button onClick=&#123;onclick&#125;&gt;onclick&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;handleApp&#125;&gt;handleApp&lt;/</span>button&gt;</span><br><span class="line">      &#123;y === <span class="number">0</span> ? &lt;Child x=&#123;x&#125; /&gt; : null&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(params) &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"创建 App"</span>);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      n: <span class="number">12</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  handleClick() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`click-----------------------------<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>()&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      n: <span class="keyword">this</span>.state.n + <span class="number">1</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  testthis() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  updateApp() &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      n: <span class="keyword">this</span>.state.n + <span class="number">2</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillMount() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"将要挂载 App"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="comment">// update</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"渲染或者更新 App"</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.state.n&#125;</span><br><span class="line">        &lt;button onClick=&#123;() =&gt; <span class="keyword">this</span>.handleClick()&#125;&gt;+<span class="number">1</span>&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;() =&gt; this.updateApp()&#125;&gt;update+2&lt;/</span>button&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="keyword">this</span>.testthis&#125;&gt;test <span class="keyword">this</span>&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"挂载完毕 App"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  shouldComponentUpdate(newProps, newState) &#123;</span><br><span class="line">    <span class="comment">// 数组更新但是页面不更新</span></span><br><span class="line">    <span class="keyword">if</span> (newState.n % <span class="number">3</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillUpdate() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"将要更新 App"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  componentDidUpdate() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"更新完成 App"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillReceiveProps() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"上级说话了 App"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.props);</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"将要死亡 App"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> getDerivedStateFromError() &#123; <span class="keyword">return</span> &#123;&#125; &#125;<span class="comment">// 会和 state 合并 </span></span><br><span class="line">  componentDidCatch() &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> RA11;</span><br></pre></td></tr></table></figure>
<h3 id="类比-vue-生命周期"><a href="#类比-vue-生命周期" class="headerlink" title="类比 vue 生命周期"></a>类比 vue 生命周期</h3><pre><code>- 类比
created
constructor

beforeMount
componentWillMount

mounted
componentDidMount

beforeUpdate
componentWillUpdate

updated
componentDidUpdated

beforeDestroy
componentWillUnmount

- 不同
vue: props data computed watch （属性）
react: render shouldComponentUpdate componentWillReceiveProps （依然是钩子）
</code></pre><h3 id="代码仓库"><a href="#代码仓库" class="headerlink" title="代码仓库"></a>代码仓库</h3><p><a href="https://github.com/iiicon/react-demo-advance/blob/master/src/pages/RA11/index.jsx" target="_blank" rel="noopener">react 生命周期</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/07/28/React-Router/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/28/React-Router/" itemprop="url">React-Router</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-28T14:47:05+08:00">
                2019-07-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React/" itemprop="url" rel="index">
                    <span itemprop="name">React</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="用-hash-做-router"><a href="#用-hash-做-router" class="headerlink" title="用 hash 做 router"></a>用 hash 做 router</h3><pre><code>window.location.hash = &apos;signin&apos;
</code></pre><h3 id="用-pushState-做-router"><a href="#用-pushState-做-router" class="headerlink" title="用 pushState 做 router"></a>用 pushState 做 router</h3><p><em>假设为顶级路由</em></p>
<pre><code>const [ui, setUi] = useState(window.location.pathname === &apos;signin&apos; ? 0 : 1)
window.history.pushState(null, &apos;&apos;, &apos;signin&apos;)
</code></pre><h3 id="用-React-Router-做路由"><a href="#用-React-Router-做路由" class="headerlink" title="用 React-Router 做路由"></a>用 React-Router 做路由</h3><p>安装 react-router-dom <code>&quot;react-router&quot;: &quot;^5.0.1&quot; &quot;react-router-dom&quot;: &quot;^5.0.1&quot;,</code></p>
<pre><code>yarn add react-router-dom
</code></pre><p>引入 Router Route Link</p>
<pre><code>import { BrowserRouter as Router, Route, Link } from &quot;react-router-dom&quot;;
</code></pre><p>使用 Router 组件</p>
<pre><code>function RA9() {
  return (
    &lt;div&gt;
      &lt;Rotuer&gt;
        &lt;Link to=&quot;/signin&quot;&gt;
          &lt;button&gt;登录&lt;/button&gt;
        &lt;/Link&gt;
        &lt;Link to=&quot;/signup&quot;&gt;
          &lt;button&gt;注册&lt;/button&gt;
        &lt;/Link&gt;
        &lt;Route path=&quot;/&quot; exact component={RA9} /&gt;
        &lt;Route path=&quot;/signin/&quot; component={SignIn} /&gt;
        &lt;Route path=&quot;/signup/&quot; component={SignUp} /&gt;
      &lt;/Rotuer&gt;
    &lt;/div&gt;
  )
}
</code></pre><p>在 react 内部会变成下面这样</p>
<pre><code>function RA9() {

  return React.createElement(
    &apos;div&apos;,
    null,
    React.createElement(
      Rotuer,
      null,
      React.createElement(
        Link,
        {
          to: &apos;/signin&apos;
        },
        React.createElement(&apos;button&apos;, null, &apos;\u767B\u5F55&apos;)
      ),
      React.createElement(
        Link,
        {
          to: &apos;/signup&apos;
        },
        React.createElement(&apos;button&apos;, null, &apos;\u6CE8\u518C&apos;)
      ),
      React.createElement(Route, {
        path: &apos;/&apos;,
        exact: true,
        component: RA9
      }),
      React.createElement(Route, {
        path: &apos;/signin/&apos;,
        component: SignIn
      }),
      React.createElement(Route, {
        path: &apos;/signup/&apos;,
        component: SignUp
      })
    )
  )
}
</code></pre><h3 id="代码仓库"><a href="#代码仓库" class="headerlink" title="代码仓库"></a>代码仓库</h3><p><a href="https://github.com/iiicon/react-demo-advance/blob/master/src/pages/RA9/index.jsx" target="_blank" rel="noopener">react-router</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/07/24/React-HooksApi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/24/React-HooksApi/" itemprop="url">React-HooksApi</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-24T08:07:40+08:00">
                2019-07-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React/" itemprop="url" rel="index">
                    <span itemprop="name">React</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="类组件的不足"><a href="#类组件的不足" class="headerlink" title="类组件的不足"></a>类组件的不足</h3><ol>
<li>难以复用的状态逻辑 缺少复用机制 渲染属性和高阶组件导致层级冗余</li>
<li>趋向复杂难以维护 生命周期混杂不相干的逻辑 相干的逻辑分散在不同的生命周期</li>
<li>this 指向困扰 内联函数过渡创建新句柄 类成员函数不能保证 this</li>
</ol>
<h3 id="Hooks-Api"><a href="#Hooks-Api" class="headerlink" title="Hooks Api"></a>Hooks Api</h3><p>就是让函数组件能有状态，以前的无状态组件变成了现在的函数组件</p>
<h3 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h3><p>使用</p>
<pre><code>import { useState } from &apos;react&apos;
</code></pre><p>在函数组件声明 state 属性 count 和 setCount 方法，0 是初始值</p>
<pre><code>const [count, setCount] = useState(0)
</code></pre><p>在组件中渲染</p>
<pre><code>&lt;button onClick={() =&gt; setCount(count + 1)}&gt;+1&lt;/button&gt;
</code></pre><p>当然初始值也可设为对象</p>
<pre><code>const [user, setUser] = useState({name: &apos;fuck&apos;,age: 100})
</code></pre><p>这样修改</p>
<pre><code>setUser({
  ...user,
  age: user.age + 1
})
</code></pre><h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h3><p>使用</p>
<pre><code>import { useEffect } from &apos;react&apos;
</code></pre><p>在函数组件中，如果依赖外部世界的逻辑，直接写到 useEffect 的回调中执行</p>
<pre><code>useEffect(() =&gt; {
  document.title = &apos;useEffect --- React Hooks&apos;
})
</code></pre><h3 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useContext(contextObj); <span class="comment">// 获取 Provider 传递的值</span></span><br></pre></td></tr></table></figure>
<h3 id="useMemo"><a href="#useMemo" class="headerlink" title="useMemo"></a>useMemo</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useMemo(<span class="function"><span class="params">()</span>=&gt;</span>&#123;reutrn fn&#125;,[]:deep)  <span class="comment">// 有返回值的时候使用</span></span><br><span class="line">setValue在useMemo中可以不写依赖，直接用参数setValue(<span class="function"><span class="params">value</span>=&gt;</span>value+<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h3 id="useCallback"><a href="#useCallback" class="headerlink" title="useCallback"></a>useCallback</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useCallback(fn, ([]: deep)); <span class="comment">// 没有返回值的时候使用</span></span><br></pre></td></tr></table></figure>
<h3 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h3><ul>
<li>获取子组件或者 dom 节点的句柄</li>
<li>渲染周期之间共享数据的存储</li>
</ul>
<h3 id="自定义-hooks"><a href="#自定义-hooks" class="headerlink" title="自定义 hooks"></a>自定义 hooks</h3><ul>
<li>use 开头的函数</li>
<li>可以逻辑复用，也可以返回 jsx</li>
<li>函数可以用 usecallback 优化</li>
</ul>
<h3 id="代码仓库"><a href="#代码仓库" class="headerlink" title="代码仓库"></a>代码仓库</h3><p><a href="https://github.com/iiicon/react-demo-advance/blob/master/src/pages/RA8/index.jsx" target="_blank" rel="noopener">React-HooksApi</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/07/24/React-ContextApi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/24/React-ContextApi/" itemprop="url">React-ContextApi</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-24T00:12:20+08:00">
                2019-07-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React/" itemprop="url" rel="index">
                    <span itemprop="name">React</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="用-context-api-传值"><a href="#用-context-api-传值" class="headerlink" title="用 context api 传值"></a>用 context api 传值</h3><p><strong>ContextApi就是给组件共享一个全局的局部变量</strong></p>
<p>首先需要 createContext</p>
<pre><code>const nContext = React.createContext(0)
</code></pre><p>其次需要在要传递值的组件上用 nContext.Provider 包起来，把要传递的值放到 value 上</p>
<pre><code>&lt;nContext.Provider value={this.state.x}&gt;
  &lt;F1 /&gt;
&lt;/nContext.Provider&gt;
</code></pre><p>然后在你需要获取值的时候用 nContext.Consumer 包裹，传递一个函数，这个函数会作为 consumer 的回调执行</p>
<pre><code>&lt;nContext.Consumer&gt;{x =&gt; &lt;F4 n4={x.n} setN={x.setN} /&gt;}&lt;/nContext.Consumer&gt;
</code></pre><p>这样我们就能在 F4 组件上获得相应的属性</p>
<h3 id="Consumer-语法的含义"><a href="#Consumer-语法的含义" class="headerlink" title="Consumer 语法的含义"></a>Consumer 语法的含义</h3><p>如下所示，我们可以通过 props.children 获取组件的子元素，如果是函数我们就可以执行，并且可以传递参数</p>
<pre><code>&lt;Consumer&gt;
  {p =&gt; &lt;div&gt;{p}&lt;/div&gt;}
&lt;/Consumer&gt;

// 标签里面传递函数
function Consumer(props) {
  // console.log(props.children)
  const child = props.children(9202)
  return (
    &lt;h2&gt;{child}&lt;/h2&gt;
  )
}
</code></pre><p>在 React 内部，上面这段代码会变成这样</p>
<pre><code>React.createElement(Consumer, null, function (p) {
  return React.createElement(&quot;div&quot;, null, p);
}); 

// 标签里面传递函数
function Consumer(props) {
  // console.log(props.children)
  var child = props.children(9202);
  return React.createElement(&quot;h2&quot;, null, child);
}
</code></pre><h3 id="代码仓库"><a href="#代码仓库" class="headerlink" title="代码仓库"></a>代码仓库</h3><p><a href="https://github.com/iiicon/react-demo-advance/blob/master/src/pages/RA7/index.jsx" target="_blank" rel="noopener">Context Api</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sgw.wiki/2019/07/21/React和React-redux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="iiicon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个没有情趣和色彩的人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/21/React和React-redux/" itemprop="url">React和React-redux</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-21T17:46:16+08:00">
                2019-07-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React/" itemprop="url" rel="index">
                    <span itemprop="name">React</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="使用-redux"><a href="#使用-redux" class="headerlink" title="使用 redux"></a>使用 redux</h3><p>在顶层组件初始化 store</p>
<ul>
<li>我们通过 createStore(reducer) 创建 store</li>
<li>我们通过 store.subscribe(render) 订阅事件</li>
<li>我们通过 store.dispatch({type, payload}) 发布事件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">const reducer = (state, action) =&gt; &#123;</span><br><span class="line">  if (!state) &#123;</span><br><span class="line">    return &#123; n: 0 &#125;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    if (action.type === &apos;add&apos;) &#123;</span><br><span class="line">      return &#123; n: state.n + action.payload &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      return state</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const store = createStore(reducer)</span><br><span class="line"></span><br><span class="line">const render = () =&gt; &#123;</span><br><span class="line">  ReactDOM.render(</span><br><span class="line">    &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">      &lt;App /&gt;</span><br><span class="line">    &lt;/Provider&gt;,</span><br><span class="line">    document.getElementById(&apos;root&apos;)</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()</span><br><span class="line">store.subscribe(render)</span><br></pre></td></tr></table></figure>
<p>我们在顶层组件初始化 store，在需要的时候发布事件，但是我们遇到了一个问题，<br>就是如果我们需要在子组件触发的话，就需要把事件一级级的传递下去，通过 props 上的事件去调用</p>
<p>这样有点累</p>
<p>当然我们也可以把 store 对象作为属性传递下去</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store=&#123;store&#125;</span><br></pre></td></tr></table></figure>
<p>这样取值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.props.store.getState().n</span><br></pre></td></tr></table></figure>
<p>这样是确实不用一级级传递事件了，但是我们却需要一级级传递 store，其实没有改变什么<br>这个时候我们就需要一个东西来管理 store 对象的各个属性和状态</p>
<h3 id="使用-react-redux"><a href="#使用-react-redux" class="headerlink" title="使用 react-redux"></a>使用 react-redux</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- connect()</span><br><span class="line">- Provider</span><br><span class="line">- connectAdvanced()</span><br><span class="line">- batch()</span><br></pre></td></tr></table></figure>
<p>我们主要用 Provider 组件和 connect 函数</p>
<p>第一步，给 Provider 一个 store</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Provider store=&#123;store&#125;&gt;</span><br></pre></td></tr></table></figure>
<p>第二步，用 connect 函数返回新的组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export default connect(mapStateToProps, mapDispatchToProps)(App)</span><br></pre></td></tr></table></figure>
<p>第一个参数是用来初始化 state 的，接受一个 state，返回新的 state</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const mapStateToProps = state =&gt; &#123;</span><br><span class="line">  return &#123; n: state.n &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第二个参数可以写作函数也可以写成对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const mapDispatchToProps = dispatch =&gt; &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    add: () =&gt; &#123;</span><br><span class="line">      dispatch(&#123; type: &apos;add&apos;, payload: 1 &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    onAdd2: () =&gt; &#123;</span><br><span class="line">      dispatch(&#123; type: &apos;add&apos;, payload: 2 &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;!-- 或者 --&gt;</span><br><span class="line">const mapDispatchToProps = &#123;</span><br><span class="line">  add: () =&gt; &#123;</span><br><span class="line">    return &#123; type: &apos;add&apos;, payload: 1 &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  onAdd2: () =&gt; &#123;</span><br><span class="line">    return &#123; type: &apos;add&apos;, payload: 2 &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们在调用的时候就可以直接 <code>this.props.add</code> 来触发事件了</p>
<p>这就是 react-redux 的使用，感叹 vuex 帮我们做了太多东西，有点香 XD</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">contextType <span class="comment">// 一个 context 的时候可以使用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> contextType = ssContext</span><br><span class="line"><span class="keyword">const</span> xx = <span class="keyword">this</span>.context</span><br><span class="line">这样可以不用 consumer 解析</span><br></pre></td></tr></table></figure>
<h3 id="代码仓库"><a href="#代码仓库" class="headerlink" title="代码仓库"></a>代码仓库</h3><p><a href="https://github.com/iiicon/react-demo-advance/blob/master/src/pages/RA6/index.jsx" target="_blank" rel="noopener">react-redux</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="iiicon">
            
              <p class="site-author-name" itemprop="name">iiicon</p>
              <p class="site-description motion-element" itemprop="description">coding note and life perception 代码笔记和生活感悟</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">117</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">49</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">iiicon</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
